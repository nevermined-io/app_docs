"use strict";(self.webpackChunkapp_docs=self.webpackChunkapp_docs||[]).push([[2332],{2756:(e,n,a)=>{a.d(n,{A:()=>l});a(6540);var t=a(4164);const r={tabItem:"tabItem_Ymn6"};var s=a(4848);function l(e){let{children:n,hidden:a,className:l}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.A)(r.tabItem,l),hidden:a,children:n})}},3212:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"integration/order-plans","title":"How users can purchase Payment Plans?","description":"How users can purchase Payment Plans?","source":"@site/docs/integration/05-order-plans.md","sourceDirName":"integration","slug":"/integration/order-plans","permalink":"/docs/integration/order-plans","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"description":"How users can purchase Payment Plans?"},"sidebar":"tutorialSidebar","previous":{"title":"How to register Payment Plans and Agents?","permalink":"/docs/integration/registration"},"next":{"title":"How can users query AI Agents they purchased?","permalink":"/docs/integration/query-agents"}}');var r=a(4848),s=a(8453),l=a(8528),i=a(2756);const o={sidebar_position:5,description:"How users can purchase Payment Plans?"},c="How users can purchase Payment Plans?",u={},d=[{value:"Ordering a Plan",id:"ordering-a-plan",level:2},{value:"Checking the Balance of a Payment Plan",id:"checking-the-balance-of-a-payment-plan",level:2}];function p(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"how-users-can-purchase-payment-plans",children:"How users can purchase Payment Plans?"})}),"\n",(0,r.jsx)(n.p,{children:"With the Payments Library, users/subscribers can order Payment Plans by paying. The process is simple and secure. The Subscriber needs to have enough funds in their wallet to pay for the Plan in the token selected by the creator of the Plan. In Nevermined, the Payment Plan creators can request the payments in any valid ERC20 or Native token (depending on the network where the Plan is created)."}),"\n",(0,r.jsx)(n.p,{children:"When the Payment Plan requires a payment in Fiat, the payment can be initiated with the libraries, but the final step needs to be done in the Nevermined App. The App will handle the payment in Fiat (Stripe integration) and will return the user to the application with the Payment Plan ordered."}),"\n",(0,r.jsx)(n.h2,{id:"ordering-a-plan",children:"Ordering a Plan"}),"\n",(0,r.jsxs)(l.A,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"TypeScript",value:"typescript"}],children:[(0,r.jsx)(i.A,{value:"python",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Here we are ordering the Plan created in the previous steps\norder_result = payments.order_plan(plan_DID)  \n# OUTPUT: orderResult: \n#  { success: True, agreementId: '0xaabbcc' }   \n"})})}),(0,r.jsx)(i.A,{value:"typescript",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Here we are ordering the plan created in the previous steps\nconst orderResult = await payments.plans.orderPlan(planId)\n// OUTPUT: orderResult: \n// {\n//   txHash: '0x5b95ebaec594b6d87e688faddf85eec3d708e6a06e61864699e5a366af1343f6',\n//   success: true\n// }\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"checking-the-balance-of-a-payment-plan",children:"Checking the Balance of a Payment Plan"}),"\n",(0,r.jsx)(n.p,{children:"After a user orders a plan, they can check their balance for that plan. The balance represents the number of credits the user has available to use within the plan."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Time-based plans provide a balance of 1 credit for subscribers. When the plan expires, this balance will be zero."})}),"\n",(0,r.jsxs)(l.A,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"TypeScript",value:"typescript"}],children:[(0,r.jsx)(i.A,{value:"python",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'balance_result = payments.get_plan_balance(plan_DID)\n# OUTPUT: balanceResult:\n# {\n#   "planType": "credits",\n#   "isSubscriptor": True,\n#   "isOwner": False,\n#   "balance": 10000000\n# }  \n'})})}),(0,r.jsx)(i.A,{value:"typescript",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const balanceResult = await payments.plans.getPlanBalance(planId)\n// OUTPUT: balanceResult:\n// {\n//   planId: '84262690312400469275420649384078993542777341811308941725027729655403981619104',\n//   planType: 'credits',\n//   holderAddress: '0x8924803472bb453b7c27a3C982A08f7515D7aA72',\n//   creditsContract: '0x17FaFabF74312EdaBEB1DB9f0CaAccd44aAFDE39',\n//   balance: '100',\n//   isSubscriber: true\n// }\n"})})})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>i});var t=a(6540);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}},8528:(e,n,a)=>{a.d(n,{A:()=>w});var t=a(6540),r=a(4164),s=a(5627),l=a(6347),i=a(372),o=a(604),c=a(1861),u=a(8749);function d(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:a}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:a,attributes:t,default:r}}=e;return{value:n,label:a,attributes:t,default:r}}))}(a);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function h(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function b(e){let{queryString:n=!1,groupId:a}=e;const r=(0,l.W6)(),s=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:n,groupId:a});return[(0,o.aZ)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function m(e){const{defaultValue:n,queryString:a=!1,groupId:r}=e,s=p(e),[l,o]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=a.find((e=>e.default))??a[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[c,d]=b({queryString:a,groupId:r}),[m,f]=function(e){let{groupId:n}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,u.Dv)(a);return[r,(0,t.useCallback)((e=>{a&&s.set(e)}),[a,s])]}({groupId:r}),y=(()=>{const e=c??m;return h({value:e,tabValues:s})?e:null})();(0,i.A)((()=>{y&&o(y)}),[y]);return{selectedValue:l,selectValue:(0,t.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),f(e)}),[d,f,s]),tabValues:s}}var f=a(9136);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=a(4848);function g(e){let{className:n,block:a,selectedValue:t,selectValue:l,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),u=e=>{const n=e.currentTarget,a=o.indexOf(n),r=i[a].value;r!==t&&(c(n),l(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const a=o.indexOf(e.currentTarget)+1;n=o[a]??o[0];break}case"ArrowLeft":{const a=o.indexOf(e.currentTarget)-1;n=o[a]??o[o.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":a},n),children:i.map((e=>{let{value:n,label:a,attributes:s}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>{o.push(e)},onKeyDown:d,onClick:u,...s,className:(0,r.A)("tabs__item",y.tabItem,s?.className,{"tabs__item--active":t===n}),children:a??n},n)}))})}function x(e){let{lazy:n,children:a,selectedValue:s}=e;const l=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===s));return e?(0,t.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function P(e){const n=m(e);return(0,v.jsxs)("div",{className:(0,r.A)("tabs-container",y.tabList),children:[(0,v.jsx)(g,{...n,...e}),(0,v.jsx)(x,{...n,...e})]})}function w(e){const n=(0,f.A)();return(0,v.jsx)(P,{...e,children:d(e.children)},String(n))}}}]);