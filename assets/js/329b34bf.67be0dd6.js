"use strict";(self.webpackChunkapp_docs=self.webpackChunkapp_docs||[]).push([[9680],{2207:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var a=r(5893),t=r(1151),s=r(599),l=r(2983);const i={sidebar_position:5,description:"How Subscribers can order Plans?"},o="How Subscribers can order Plans?",c={id:"libraries/order-plans",title:"How Subscribers can order Plans?",description:"How Subscribers can order Plans?",source:"@site/docs/libraries/05-order-plans.md",sourceDirName:"libraries",slug:"/libraries/order-plans",permalink:"/docs/libraries/order-plans",draft:!1,unlisted:!1,editUrl:"https://github.com/nevermined-io/app_docs/tree/main/docs/libraries/05-order-plans.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,description:"How Subscribers can order Plans?"},sidebar:"tutorialSidebar",previous:{title:"How to register Payment Plans and Agents?",permalink:"/docs/libraries/assets-registration"},next:{title:"How Subscribers can query AI Agents?",permalink:"/docs/libraries/query-agents"}},u={},d=[{value:"Ordering a Plan",id:"ordering-a-plan",level:2},{value:"Get balance in credits of the Payment Plan",id:"get-balance-in-credits-of-the-payment-plan",level:2}];function p(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"how-subscribers-can-order-plans",children:"How Subscribers can order Plans?"})}),"\n",(0,a.jsx)(n.p,{children:"With the Payments Library, Subscribers can order Plans paying in Crypto. The process is simple and secure. The Subscriber needs to have enough funds in their wallet to pay for the Plan in the token selected by the creator of the Plan. In Nevermined the Payment Plan creators can request the payments in any valid ERC20 or Native token (depending on the network where the Plan is created)."}),"\n",(0,a.jsx)(n.h2,{id:"ordering-a-plan",children:"Ordering a Plan"}),"\n",(0,a.jsxs)(s.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"Typescript",value:"typescript"}],children:[(0,a.jsx)(l.Z,{value:"python",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# Here we are ordering the Plan created in the previous steps\norder_result = payments.order_plan(plan_DID)  \n# OUTPUT: orderResult: \n#  { success: True, agreementId: '0xaabbcc' }   \n"})})}),(0,a.jsx)(l.Z,{value:"typescript",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// Here we are ordering the Plan created in the previous steps\nconst orderResult = await payments.orderPlan(planDID)  \n// OUTPUT: orderResult: \n//  { success: true, agreementId: '0xaabbcc' }  \n\n"})})})]}),"\n",(0,a.jsx)(n.h2,{id:"get-balance-in-credits-of-the-payment-plan",children:"Get balance in credits of the Payment Plan"}),"\n",(0,a.jsx)(n.p,{children:"Once a user orders a Plan, they can check the balance of the Plan. The balance is the amount of credits that the user has available to use in the Plan."}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"Time-based Plans have a balance of 1 credit for subscribers. When the plan expires this balance will be zero."})}),"\n",(0,a.jsxs)(s.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"Typescript",value:"typescript"}],children:[(0,a.jsx)(l.Z,{value:"python",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'  balance_result = payments.get_plan_balance(plan_DID)\n  # OUTPUT: balanceResult:\n  # {\n  #  "planType": \'credits",\n  #  "isSubscriptor": True,\n  #  "isOwner": False,\n  #  "balance": 10000000\n  #}  \n'})})}),(0,a.jsx)(l.Z,{value:"typescript",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"\nconst balanceResult = await payments.getPlanBalance(planDID)\n// OUTPUT: balanceResult:\n// {\n//  subscriptionType: 'credits',\n//  isSubscriptor: true,\n//  isOwner: false,\n//  balance: 100n\n//}  \n\n"})})})]})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},2983:(e,n,r)=>{r.d(n,{Z:()=>l});r(7294);var a=r(512);const t={tabItem:"tabItem_Ymn6"};var s=r(5893);function l(e){let{children:n,hidden:r,className:l}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.Z)(t.tabItem,l),hidden:r,children:n})}},599:(e,n,r)=>{r.d(n,{Z:()=>P});var a=r(7294),t=r(512),s=r(2466),l=r(6550),i=r(469),o=r(1980),c=r(7392),u=r(812);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:r}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:r,attributes:a,default:t}}=e;return{value:n,label:r,attributes:a,default:t}}))}(r);return function(e){const n=(0,c.lx)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function h(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function b(e){let{queryString:n=!1,groupId:r}=e;const t=(0,l.k6)(),s=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,o._X)(s),(0,a.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})}),[s,t])]}function m(e){const{defaultValue:n,queryString:r=!1,groupId:t}=e,s=p(e),[l,o]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=r.find((e=>e.default))??r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:s}))),[c,d]=b({queryString:r,groupId:t}),[m,f]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,s]=(0,u.Nk)(r);return[t,(0,a.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:t}),v=(()=>{const e=c??m;return h({value:e,tabValues:s})?e:null})();(0,i.Z)((()=>{v&&o(v)}),[v]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),f(e)}),[d,f,s]),tabValues:s}}var f=r(2389);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=r(5893);function g(e){let{className:n,block:r,selectedValue:a,selectValue:l,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.o5)(),u=e=>{const n=e.currentTarget,r=o.indexOf(n),t=i[r].value;t!==a&&(c(n),l(t))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;n=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;n=o[r]??o[o.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.Z)("tabs",{"tabs--block":r},n),children:i.map((e=>{let{value:n,label:r,attributes:s}=e;return(0,y.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>o.push(e),onKeyDown:d,onClick:u,...s,className:(0,t.Z)("tabs__item",v.tabItem,s?.className,{"tabs__item--active":a===n}),children:r??n},n)}))})}function x(e){let{lazy:n,children:r,selectedValue:s}=e;const l=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:(0,t.Z)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function w(e){const n=m(e);return(0,y.jsxs)("div",{className:(0,t.Z)("tabs-container",v.tabList),children:[(0,y.jsx)(g,{...n,...e}),(0,y.jsx)(x,{...n,...e})]})}function P(e){const n=(0,f.Z)();return(0,y.jsx)(w,{...e,children:d(e.children)},String(n))}},1151:(e,n,r)=>{r.d(n,{Z:()=>i,a:()=>l});var a=r(7294);const t={},s=a.createContext(t);function l(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);