"use strict";(self.webpackChunkapp_docs=self.webpackChunkapp_docs||[]).push([[3685],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>c});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),h=p(n),c=a,g=h["".concat(s,".").concat(c)]||h[c]||d[c]||o;return n?i.createElement(g,r(r({ref:t},u),{},{components:n})):i.createElement(g,r({ref:t},u))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},44827:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var i=n(87462),a=(n(67294),n(3905));const o={sidebar_position:10,description:"How to monetize a ChatGPT plugin using Nevermined"},r="Monetizing a ChatGPT plugin using Nevermined",l={unversionedId:"tutorials/ai/chatgpt-plugin",id:"tutorials/ai/chatgpt-plugin",title:"Monetizing a ChatGPT plugin using Nevermined",description:"How to monetize a ChatGPT plugin using Nevermined",source:"@site/docs/tutorials/ai/10-chatgpt-plugin.md",sourceDirName:"tutorials/ai",slug:"/tutorials/ai/chatgpt-plugin",permalink:"/docs/tutorials/ai/chatgpt-plugin",draft:!1,editUrl:"https://github.com/nevermined-io/app_docs/tree/main/docs/tutorials/ai/10-chatgpt-plugin.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10,description:"How to monetize a ChatGPT plugin using Nevermined"},sidebar:"tutorialSidebar",previous:{title:"How to expose an AI agent and publish it into Nevermined",permalink:"/docs/tutorials/ai/ai-service"},next:{title:"How to create and integrate a Hugging Face Inference Endpoint",permalink:"/docs/tutorials/ai/huggingface"}},s={},p=[{value:"Create your own ChatGPT plugin",id:"create-your-own-chatgpt-plugin",level:2},{value:"Register your ChatGPT plugin in Nevermined",id:"register-your-chatgpt-plugin-in-nevermined",level:2},{value:"Before you register your Service",id:"before-you-register-your-service",level:3},{value:"Registering your AI Service",id:"registering-your-ai-service",level:3},{value:"Defining Endpoints URLs",id:"defining-endpoints-urls",level:4},{value:"Add some metadata and associate the Smart Subscription",id:"add-some-metadata-and-associate-the-smart-subscription",level:4},{value:"Integrating your ChatGPT plugin in OpenAI",id:"integrating-your-chatgpt-plugin-in-openai",level:3},{value:"Using your ChatGPT plugin",id:"using-your-chatgpt-plugin",level:3}],u={toc:p};function d(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,i.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"monetizing-a-chatgpt-plugin-using-nevermined"},"Monetizing a ChatGPT plugin using Nevermined"),(0,a.kt)("p",null,"OpenAI created the ChatGPT plugins as an extension that allow users to interact with external services. OpenAI ChatGPT provides intelligent answers to users based on the internal data crawled by OpenAI from internet until moment in time (2022) when the model was trained. OpenAI is not connected to internet and therefore it cannot provide answers to questions that are not in the internal data."),(0,a.kt)("p",null,"As an answer to that OpenAI created the ChatGPT plugins, that allow users to connect to external services and get answers from them. The ChatGPT plugins are a way to extend the capabilities of the OpenAI ChatGPT model."),(0,a.kt)("p",null,"Since them several organizations have created their own ChatGPT plugins, and they are available in the OpenAI marketplace."),(0,a.kt)("p",null,"In this tutorial we are gonna describe how to publish your OpenAI ChatGPT plugin in Nevermined, so you can monetize it and share it with a broader group of users."),(0,a.kt)("h2",{id:"create-your-own-chatgpt-plugin"},"Create your own ChatGPT plugin"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"If you already created your plugin you can skip this section")),(0,a.kt)("p",null,"OpenAI created the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/openai/chatgpt-retrieval-plugin"},"ChatGPT Plugin Retrieval")," software template to facilitate the creation of ChatGPT plugins. It provides the scafolding to integrate into the ChatGPT marketplace.\nThis software template is ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/openai/chatgpt-retrieval-plugin"},"available on Github")," so you can copy/fork that code and implement your stuff on top of that."),(0,a.kt)("p",null,"There are multiple options when you create your plugin, like the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/openai/chatgpt-retrieval-plugin#choosing-a-vector-database"},"vector database to use"),", but here we are gonna focus and what needs to be done to integrate your plugin with ChatGPT."),(0,a.kt)("p",null,"After you find the right Vector Database and implement the logic it's important you pay attention to the ",(0,a.kt)("inlineCode",{parentName:"p"},".well-known")," folder:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Edit the ",(0,a.kt)("inlineCode",{parentName:"li"},".well-known/ai-plugin.json")," file. It should contain the information about your plugin, like the name, description, version, etc."),(0,a.kt)("li",{parentName:"ol"},"In the ",(0,a.kt)("inlineCode",{parentName:"li"},"auth")," section you need to configure the authentication mechanism that validates the requests via a bearer token. See the below example for more details."),(0,a.kt)("li",{parentName:"ol"},"Overwrite with your logo the ",(0,a.kt)("inlineCode",{parentName:"li"},".well-known/logo.png")," file"),(0,a.kt)("li",{parentName:"ol"},"Add your contact email and link to your website")),(0,a.kt)("p",null,"Example of the ",(0,a.kt)("inlineCode",{parentName:"p"},".well-known/ai-plugin.json")," file completed:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "schema_version": "v1",\n  "name_for_model": "retrieval",\n  "name_for_human": "Elvis Songs Summarizer",\n  "description_for_model": "Plugin for summarizing Elvis songs. Giving an Elvis title song, it summarizes the lyrics of that song.",\n  "description_for_human": "Summarizes Elvis songs giving the title.",\n  "auth": {\n    "type": "user_http",\n    "authorization_type": "bearer"\n  },\n  "api": {\n    "type": "openapi",\n    "url": "https://zparolnv3lqwtjk26xfkgustpbbk9gz9so4x30zfe5v8x8wqs.proxy.goerli.nevermined.app/.well-known/openapi.yaml",\n    "has_user_authentication": false\n  },\n  "logo_url": "https://zparolnv3lqwtjk26xfkgustpbbk9gz9so4x30zfe5v8x8wqs.proxy.goerli.nevermined.app/.well-known/nvm-logo.png",\n  "contact_email": "info@nevermined.io", \n  "legal_info_url": "https://nevermined.io/"\n}\n')),(0,a.kt)("p",null,"Edit the ",(0,a.kt)("inlineCode",{parentName:"p"},".well-known/openapi.yaml")," file. It should contain the information about your API. It's very important each endpoint included here has good documentation that helps ChatGPT to identify if the method exposed can be useful depending on the user query. So if your method analyze the sentiment of a text, you should include in the documentation the keywords that ChatGPT can use to identify your plugin as the right one to analyze the sentiment given a user query."),(0,a.kt)("p",null,"Extract example of the ",(0,a.kt)("inlineCode",{parentName:"p"},".well-known/openapi.yaml")," file completed:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"openapi: 3.0.2\ninfo:\n  title: Elvis Songs Summarizer\n  description: Plugin for summarizing Elvis songs. Giving an Elvis title song, it summarizes the lyrics of that song\n  version: 0.0.6\n  servers:\n    - url: https://zparolnv3lqwtjk26xfkgustpbbk9gz9so4x30zfe5v8x8wqs.proxy.goerli.nevermined.app\npaths:\n  /query:\n    post:\n      summary: Query\n      description: Accepts the title of a Elvis song as a search query objects array each with query and optional filter. Break down complex questions into sub-questions. Refine results by criteria, e.g. time / source, don't do this often. Split queries if ResponseTooLargeError occurs.\n      operationId: query_query_post\n\n[...]\n\n  /ask:\n    post:\n      summary: Summarize\n      description: Given an Elvis song title it summarizes the lyrics of that song. Break down complex questions into sub-questions. Refine results by criteria, e.g. time / source, don't do this often. Split queries if ResponseTooLargeError occurs.\n      operationId: ask_query_post\n\n[...]      \n")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"You can find a complete example in the Nevermined ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/nevermined-io/chatgpt-elvis-plugin"},"Elvis ChatGPT plugin"))),(0,a.kt)("p",null,"At this point you should have your plugin ready to be deployed using your favorite cloud/on-premise solution."),(0,a.kt)("h2",{id:"register-your-chatgpt-plugin-in-nevermined"},"Register your ChatGPT plugin in Nevermined"),(0,a.kt)("p",null,"So at this point you should you have implemented your plugin and deploy it somewhere. Now you can share your plugin with the other ChatGPT users in a safety way, and even monetize it if you want, using a Nevermined Smart Subscription."),(0,a.kt)("p",null,"In order to test and learn how you can use Nevermined App, we provide a test deployment that uses Arbitrum Goerli testnet, where you can try the different features provided by Nevermined."),(0,a.kt)("p",null,"You can access to this test version of Nevermined App ",(0,a.kt)("a",{parentName:"p",href:"https://goerli.nevermined.app/"},"here")),(0,a.kt)("h3",{id:"before-you-register-your-service"},"Before you register your Service"),(0,a.kt)("p",null,"We recommend you to take a look to the different ",(0,a.kt)("a",{parentName:"p",href:"https://docs.nevermined.app/docs/getting-started/"},"guides and tutorials we have about Nevermined App")),(0,a.kt)("p",null,"Before starting using Nevermined you will need to install and config Metamask in your browser. ",(0,a.kt)("a",{parentName:"p",href:"https://docs.nevermined.app/docs/tutorials/metamask/"},"See the instructions here"),", ",(0,a.kt)("a",{parentName:"p",href:"https://docs.nevermined.app/docs/tutorials/metamask-networks/#arbitrum-goerli-testnet"},"here"),", and ",(0,a.kt)("a",{parentName:"p",href:"https://docs.nevermined.app/docs/tutorials/metamask-tokens/"},"here"),", "),(0,a.kt)("p",null,"Once you have Metamask correctly configured, the next step is to create a brand new ",(0,a.kt)("a",{parentName:"p",href:"https://docs.nevermined.app/docs/getting-started/smart-subscriptions"},"Smart Subscription")),(0,a.kt)("p",null,"You will register your AI Service associated with this Subscription you are about to create. The process to create a new Subscription is pretty straightforward, but ",(0,a.kt)("a",{parentName:"p",href:"https://docs.nevermined.app/docs/tutorials/create-subscription"},"here")," you can find some help to guide you."),(0,a.kt)("h3",{id:"registering-your-ai-service"},"Registering your AI Service"),(0,a.kt)("p",null,"So now that you have all set up and you have created a Smart Subscription, you can create a Web Service Asset to register your AI Service in Nevermined App."),(0,a.kt)("p",null,"You can find a complete guide to register your service ",(0,a.kt)("a",{parentName:"p",href:"https://docs.nevermined.app/docs/tutorials/register-webservice/"},"here")),(0,a.kt)("p",null," ",(0,a.kt)("img",{alt:"Plugin Service Registration",src:n(73097).Z,width:"2273",height:"1361"})),(0,a.kt)("h4",{id:"defining-endpoints-urls"},"Defining Endpoints URLs"),(0,a.kt)("p",null," In the second step of the process you'll see you need to provide the endpoints URLs of your ChatGPT Plugin Service, and in case you have protected them with a Bearer Token, you need to facilitate it. "),(0,a.kt)("p",null," Instead of define the endpoints one by one manually, we can use the OpenAPI integration to do this automatically."),(0,a.kt)("p",null,"So in the ",(0,a.kt)("inlineCode",{parentName:"p"},"OpenAPI URL")," field you need to provide the URL of the ",(0,a.kt)("inlineCode",{parentName:"p"},"openapi.json")," file describing your API. If you used the ChatGPT Template plugin this should be generated automatically and exposed in the root of your service. In the example we are using the Elvis ChatGPT plugin, the URL is ",(0,a.kt)("inlineCode",{parentName:"p"},"https://chatgpt-plugin.goerli.nevermined.app/openapi.json")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Plugin Endpoints",src:n(15809).Z,width:"2147",height:"1335"})),(0,a.kt)("p",null,"Once this is done, all the endpoints included as part of the definition will be registered automatically in the ",(0,a.kt)("inlineCode",{parentName:"p"},"Protected Endpoints")," section. Go through them and remove the ones you don't want to expose. For example we don't want to allow anyone to update/upsert/delete any document through the API, so we remove those endpoints clicking on the cross at right of each endpoint."),(0,a.kt)("p",null,"Now this step is important, the ChatGPT plugins require to have full read access to the ",(0,a.kt)("inlineCode",{parentName:"p"},".well-known")," folder, so we need to add the following endpoint to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Open Endpoints")," section:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"https://YOUR_SERVICE/.well-known/(.*)")),(0,a.kt)("p",null,"The final ",(0,a.kt)("inlineCode",{parentName:"p"},"(.*)")," part is a wildcard that will allow the ChatGPT plugin to access to any file included in the ",(0,a.kt)("inlineCode",{parentName:"p"},".well-known")," folder. Use your own domain instead of ",(0,a.kt)("inlineCode",{parentName:"p"},"YOUR_SERVICE"),". For example using the previous Elvis ChatGPT plugin example, the URL will be ",(0,a.kt)("inlineCode",{parentName:"p"},"https://chatgpt-plugin.goerli.nevermined.app/.well-known/(.*)")),(0,a.kt)("h4",{id:"add-some-metadata-and-associate-the-smart-subscription"},"Add some metadata and associate the Smart Subscription"),(0,a.kt)("p",null,"In the next 2 screens you just need to include some additional metadata that facilitates the integration by a third-party. And finally we just need to associate the Smart Subscription you created before. If you select any non-free Smart Subscription, the users who want to use your plugin will need to pay for it."),(0,a.kt)("p",null,"When you finish the process you will see your new Web Service Asset registered in the Nevermined App."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Plugin Details Page",src:n(69417).Z,width:"2156",height:"1352"})),(0,a.kt)("p",null,"Now if you go to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Integration Details")," tab of the service you will see the ",(0,a.kt)("inlineCode",{parentName:"p"},"Proxy URL")," and the ",(0,a.kt)("inlineCode",{parentName:"p"},"JWT")," token. The JWT token is only available to you or the users who have access to the Smart Subscription associated with the service. This token is used to authenticate the requests to the protected endpoints."),(0,a.kt)("p",null,"Remember them because you are gonna need it when you integrate your plugin in OpenAI."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"How to integrate details",src:n(21575).Z,width:"2126",height:"1359"})),(0,a.kt)("p",null,"Copy the ",(0,a.kt)("inlineCode",{parentName:"p"},"Proxy URL")," and paste it in all the references of the ",(0,a.kt)("inlineCode",{parentName:"p"},".well-known/openapi.yaml"),", ",(0,a.kt)("inlineCode",{parentName:"p"},".well-known/ai-plugin.json")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"server/main.py")," files of your plugin. This is the URL that ChatGPT will use to access to your plugin and it's better not expose any public url on it."),(0,a.kt)("p",null,"Redeploy your plugin once this is done."),(0,a.kt)("h3",{id:"integrating-your-chatgpt-plugin-in-openai"},"Integrating your ChatGPT plugin in OpenAI"),(0,a.kt)("p",null,"Now our plugin is registered in Nevermined, we can integrate it in ChatGPT OpenAI: "),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Go to the ",(0,a.kt)("a",{parentName:"li",href:"https://chat.openai.com/?model=gpt-4-plugins"},"OpenAI ChatGPT page")," and click on ",(0,a.kt)("inlineCode",{parentName:"li"},"GPT-4")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Plugins")," linkthe ",(0,a.kt)("inlineCode",{parentName:"li"},"Add Plugin")," button."),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Plugins Store")),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Develop your own plugin")),(0,a.kt)("li",{parentName:"ol"},"Paste the domain of your plugin using the ",(0,a.kt)("inlineCode",{parentName:"li"},"Proxy URL")," we copied before: ",(0,a.kt)("inlineCode",{parentName:"li"},"https://zparolnv3lqwtjk26xfkgustpbbk9gz9so4x30zfe5v8x8wqs.proxy.goerli.nevermined.app"),(0,a.kt)("img",{alt:"How to integrate details",src:n(73321).Z,width:"909",height:"819"})),(0,a.kt)("li",{parentName:"ol"},"OpenAI will fetch the ",(0,a.kt)("inlineCode",{parentName:"li"},"ai-plugin.json")," file and validate it. If everything is ok you will see the ",(0,a.kt)("inlineCode",{parentName:"li"},"Install")," button enabled. Click on it."),(0,a.kt)("li",{parentName:"ol"},"The application will ask you to introduce the ",(0,a.kt)("strong",{parentName:"li"},"Authentication Token"),". Paste here the ",(0,a.kt)("inlineCode",{parentName:"li"},"JWT")," token copied before. ",(0,a.kt)("img",{alt:"How to integrate details",src:n(18857).Z,width:"888",height:"566"})),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Install")," and the plugin will be ready to use")),(0,a.kt)("h3",{id:"using-your-chatgpt-plugin"},"Using your ChatGPT plugin"),(0,a.kt)("p",null,"Now in the ChatGPT interface, when you click on GPT-4 > Plugins you will see your plugin available. Click on it and you will see the plugin enabled."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Using the ChatGPT plugin",src:n(86564).Z,width:"1644",height:"801"})),(0,a.kt)("p",null,"So if everything is ok, you can start using your plugin. In the ChatGPT input field introce a query that is related with your plugin, if ChatGPT identify your query as something your plugin can resolve ti will send a query to it (remember we said the description of your API was important)."),(0,a.kt)("p",null,"ChatGPT will send a query to your plugin through the Nevermined Proxy and will use the JWT token provided. Without that JWT token the request wouldn't go through. Your plugin will return the response to ChatGPT and it will show it to you."))}d.isMDXComponent=!0},73097:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/001_Service_Registration_01-c61d29d5e2a29cbc7493ae2d54d93623.png"},15809:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/002_Service_Registration_02-966c86e4076bbf863a984869d92516b2.png"},69417:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/009_Service_Details_02-5ab0cabc8b80f11b25c816c549334b35.png"},21575:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/010_Service_Details_03-1381a574e0839a132708476cb0922dea.png"},73321:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/015-Install_Plugin_Validate_Manifest-e67053e7b7abb5ae77c21c17cfa3acc5.png"},18857:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/019-Install_Plugin_Validate_Credentials_05-cb7399708916ab0be83d499b527406e6.png"},86564:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/31_ChatGPT_Summarize_Song_02-214ea8b1d33fd9802dfaa33216287274.png"}}]);